"use strict";(self["webpackChunkvue_cli"]=self["webpackChunkvue_cli"]||[]).push([[785],{2785:function(e,n,r){r.r(n),r.d(n,{default:function(){return $}});var t=function(){var e=this,n=e._self._c;return n("div",{attrs:{"page-index":""}},[n("div",[n("BortherVue"),n("SisterVue")],1),n("div",{directives:[{name:"card",rawName:"v-card"}]},[n("p",[e._v("全局事件总线(任意组件通信)")]),e._m(0)])])},o=[function(){var e=this,n=e._self._c;return n("div",[n("pre",[e._v("父传子使用props属性, 子传父使用$emit函数, 那么兄弟之间如何传递数据呢?\n拿转账来说, 网络支付没出来之前, 都是通过银行代理操作的(找到银行, 告诉银行你要转账的对象以及转账的金额, 然后银行就会帮你进行转账操作)\n在Vue中, 我们可以找一个公共的组件, 由它进行代理操作, 让所有需要传递数据的组件都去找它帮忙\n那么, 问题来了, 谁能让所有组件都可以访问到呢?\n杠:\n  a: Vue的实例对象以及VueComponent都可以被访问到\n例1:\n  main.js->\n  const worker = Vue.extend({})\n  // 在Vue原型上添加一个工作者, 让其帮忙做中间商的角色\n  Vue.prototype.worker = worker\n\n  other components->\n  this.worker.$on('xxx', {})\n  this.worker.$emit('xxx', [...args])\n  以上是通过公用组件的方式实现的, 但是, 这种方式不推荐, 因为还要创建组件将其绑定到Vue原型上, 还有种不用创建Vue组件的方式\n例2: 众所周知, Vue实例对象也可以被访问到, 因此可以在Vue创建之前, 将一个代理工作者(中间商)添加到Vue原型上\n  main.js->\n  new Vue({\n    ...\n    beforeCreated() {\n        Vue.prototype.$worker = this\n    }\n    ...\n  })\n\n  other components->\n  // 接收数据组件\n  this.$worker.$on(...)\n  // 传递数据组件\n  this.$worker.$emit(...)\n以上的方式可以在任意组件之间传递数据\n注:\n  最好在绑定事件的组件上, 在销毁前解绑事件\n  beforeDestory() {\n    this.$worker.off('...')\n  }\n                ")])])}],s=function(){var e=this,n=e._self._c;return n("div",{directives:[{name:"shadow",rawName:"v-shadow",value:{radius:8},expression:"{ radius: 8 }"}]},[n("p",{pre:!0},[e._v("我是哥哥")]),n("p",[n("button",{attrs:{type:"button"},on:{click:e.zhuanZhang}},[e._v(" 给我的好妹妹转账300元 ")])])])},a=[],u={name:"Borther",methods:{zhuanZhang(){this.$worker.$emit("transferAccount",300)}}},i=u,c=r(1001),d=(0,c.Z)(i,s,a,!1,null,"d070922a",null),h=d.exports,m=function(){var e=this,n=e._self._c;return n("div",{directives:[{name:"shadow",rawName:"v-shadow",value:{radius:8},expression:"{ radius: 8 }"}],staticStyle:{"margin-top":"1rem"}},[n("p",{pre:!0},[e._v("我是妹妹")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.money,expression:"money"}]},[e._v("+"+e._s(e.money))])])},l=[],p={name:"Sister",data(){return{money:null}},mounted(){this.$worker.$on("transferAccount",(e=>{this.money=e,console.log(`收到了哥哥的转账, ${e}元`),alert(`收到了哥哥的转账, ${e}元`)}))},beforeDestroy(){this.$worker.$off("transferAccount")}},v=p,w=(0,c.Z)(v,m,l,!1,null,"6de41ad8",null),f=w.exports,_={name:"Communication.",components:{BortherVue:h,SisterVue:f},data(){return{}}},k=_,V=(0,c.Z)(k,t,o,!1,null,"488795da",null),$=V.exports}}]);
//# sourceMappingURL=785.21abc2c0.js.map