(self["webpackChunkvue_cli"]=self["webpackChunkvue_cli"]||[]).push([[491],{491:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=function(){var e=this,n=e._self._c;return n("div",{attrs:{"page-index":""}},[n("div",{directives:[{name:"shadow",rawName:"v-shadow",value:{radius:8},expression:"{ radius: 8 }"}]},[n("AreaVue")],1),n("div",{directives:[{name:"shadow",rawName:"v-shadow",value:{radius:8},expression:"{ radius: 8 }"}],staticStyle:{"margin-top":"1rem"}},[n("ReceiveVue")],1),n("div",{directives:[{name:"card",rawName:"v-card",value:450,expression:"450"}],attrs:{"data-has-a":""}},[n("p",[e._v("关于消息订阅与发布")]),e._m(0)])])},s=[function(){var e=this,n=e._self._c;return n("div",[n("pre",[e._v("官方地址: ["),n("a",{attrs:{href:"https://sahadar.github.io/pubsub/",target:"_blank"}},[e._v("https://sahadar.github.io/pubsub/")]),e._v("]\n安装:\n  npm i pubsub.js\n使用:\n  import pubsub from 'pubsub.js'\n  // 发布消息(发布的消息必须是List类型)\n  pubsub.publish('消息名', ['data'])\n  // 订阅消息(若不会用到unsubscribe, 则可以不写this.subId=)\n  this.subId = pubsub.subscribe('消息名', (data) => {\n    // 接收的数据\n    console.log(data)\n  })\n  // 取消订阅(需要传递一个ID)\n  pubsub.unsubscribe(subId)\n                ")])])}],u=function(){var e=this,n=e._self._c;return n("div",[n("p",[e._v("我有很多产业链, 比如一个消息发布产品")]),n("div",[n("p",[e._v("产业链(组件)")]),n("hr"),n("div",[n("PublishVue")],1)])])},o=[],i=function(){var e=this,n=e._self._c;return n("div",[n("p",[e._v("我是消息发布者")]),n("p",[n("button",{attrs:{type:"button"},on:{click:e.publishInfo}},[e._v(" 发布一条消息 ")]),e._v("   "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.info,expression:"info"}],attrs:{type:"text",placeholder:"请输入要发布的信息"},domProps:{value:e.info},on:{input:function(n){n.target.composing||(e.info=n.target.value)}}})])])},a=[],c=t(3985),p=t.n(c),l={name:"Publish",data(){return{info:null}},methods:{publishInfo(){p().publish("news",[this.info?this.info:"2023到了, 祝你心想事成, 万事如意!"]),this.info=null}}},f=l,b=t(1001),v=(0,b.Z)(f,i,a,!1,null,"619a17be",null),d=v.exports,h={name:"Area",components:{PublishVue:d},data(){return{}}},y=h,_=(0,b.Z)(y,u,o,!1,null,"3df232a2",null),g=_.exports,m=function(){var e=this,n=e._self._c;return n("div",[n("p",[e._v("我是消息接收者")]),n("hr"),n("div",[e._v(" 接收的信息: "),e._l(e.receiveInfo,(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])}))],2)])},w=[],x=(t(7658),{name:"Receive",data(){return{receiveInfo:Array()}},mounted(){this.subId=p().subscribe("news",(e=>{console.log("发布消息了."),this.receiveInfo.push(e)}))},beforeDestroy(){p().unsubscribe(this.subId)}}),j=x,I=(0,b.Z)(j,m,w,!1,null,"ea71a6ea",null),k=I.exports,A={name:"NewsPublish",components:{AreaVue:g,ReceiveVue:k},data(){return{}}},P=A,V=(0,b.Z)(P,r,s,!1,null,"dcf22cbc",null),N=V.exports},3985:function(e,n,t){var r,s;t(7658),function(u){"use strict";var o=null,i=null;function a(e){var n={},t={separator:e&&e.separator?e.separator:"/",recurrent:!(!e||"boolean"!==typeof e.recurrent)&&e.recurrent,depth:e&&"number"===typeof e.depth?e.depth:null,async:!(!e||"boolean"!==typeof e.async)&&e.async,context:e&&e.context?e.context:null,log:!(!e||!e.log)&&e.log};function r(e,n){var t=0,r=e.length;for(t=0;t<r;t++)n(t,e[t])}function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function u(e,n,s){if(s="boolean"===typeof s?s:t.async,e.length){var u=e.slice();r(u,(function(e,t){"object"===typeof t&&u.hasOwnProperty(e)&&(s?setTimeout((function(){t.callback.apply(t.context,n)}),4):t.callback.apply(t.context,n))}))}}function o(e,n){var t;for(t in e)"_"!==t[0]&&e.hasOwnProperty(t)&&u(e[t]._events,n)}function i(e,n,t,r){t=t.slice();var s=t.shift(),a=r.depth,c=r.async,p=r.partsLength,l=r.recurrent,f=p-t.length;if(s)if("undefined"!==typeof e["*"]&&i(e["*"],n,t,r),"*"===s&&o(e,n,c),"undefined"!==typeof e[s]){if(e=e[s],!0===l&&"number"!==typeof a){if(u(e._events,n,c),0===t.length)return}else!0===l&&"number"===typeof a&&f>=p-a&&u(e._events,n,c);i(e,n,t,r)}else r.log&&console.warn("There is no "+r.nsString+" subscription");else u(e._events,n,c)}function c(e,r,s){var u,o=e.split(t.separator),i=s&&"undefined"!==typeof s.context?s.context:t.context,a=null,c=0;for(i||(i=r),u=n,c=0;c<o.length;c+=1)"undefined"===typeof u[o[c]]&&(u[o[c]]={},u[o[c]]._events=[]),u=u[o[c]];return a={callback:r,context:i},u._events.push(a),{namespace:o.join(t.separator),event:a}}function p(e){if(null===e||"undefined"===typeof e)return null;var s,u=e.namespace,o=e.event,i=u.split(t.separator),a=0;for(s=n,a=0;a<i.length;a+=1){if("undefined"===typeof s[i[a]])return t.log&&console.error("There is no "+u+" subscription"),null;s=s[i[a]]}r(s._events,(function(e){s._events[e]===o&&s._events.splice(e,1)}))}return{publish:function(e,r,s){var u=e.split(t.separator),o="object"===typeof s&&s.recurrent?s.recurrent:t.recurrent,a="object"===typeof s&&s.depth?s.depth:t.depth,c="object"===typeof s&&s.async?s.async:t.async,p=u.length;u.length?i(n,r,u,{recurrent:o,depth:a,async:c,parts:u,nsString:e,partsLength:p}):t.log&&console.error("Wrong namespace provided "+e)},subscribe:function(e,n,t){var u=this,o=[];if(s(n))r(n,(function(r){var s=n[r];o=o.concat(u.subscribe(e,s,t))}));else{if(!s(e))return c.apply(u,arguments);r(e,(function(r){var s=e[r];o=o.concat(u.subscribe(s,n,t))}))}return o},subscribeOnce:function(e,n,t){var r=this,s=null;function u(){var e=this;n.apply(e,arguments),r.unsubscribe(s)}return s=r.subscribe(e,u,t),s},unsubscribe:function(e){var n=this;s(e)?r(e,(function(t){var r=e[t];p.apply(n,[r])})):p.apply(n,arguments)},newInstance:function(e){return new a(e)}}}"object"===typeof pubsub?i=pubsub:"object"===typeof t.g&&"object"===typeof t.g.pubsubConfig&&(i=t.g.pubsubConfig),o=new a(i),r=o,s="function"===typeof r?r.call(n,t,n,e):r,void 0===s||(e.exports=s),e.exports&&(e.exports=o),"object"===typeof window&&(window.pubsub=o,window!==u&&(u.pubsub=o))}(this)}}]);
//# sourceMappingURL=491.1b41d863.js.map